<div class="mat-h3 text-muted">
  <!-- Root directory -->
  <div fxLayout="row" fxLayoutGap="0.5rem" fxLayoutAlign="baseline center">
    <mat-icon>folder_open</mat-icon>
    <div>Directories</div>
    <div fxFlex></div>
    <mat-icon class="clickable" (click)="toggleFilter()" *ngIf="dirQp == '/'">filter_list</mat-icon>
  </div>
  <div *ngIf="filterVisible">
    <mat-divider></mat-divider>
    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
      <mat-icon class="clickable accent-text-hover" (click)="setStartLetterFilter('')">clear
      </mat-icon>
      <span class="clickable accent-text-hover"
            [class.accent-text]="filterByStartCharValue == letter"
            *ngFor="let letter of letters"
            (click)="setStartLetterFilter(letter)">{{letter}}</span>
    </div>
  </div>
</div>

<!-- Use virtual scroll if it's enabled or we're on the root directory -->
<app-virtual-scroll-directories [directories]="directories"
    *ngIf="(virtualScroll|async) && dirQp == '/' else conventionalScroll">
</app-virtual-scroll-directories>

<ng-template #conventionalScroll>
  <div
      *ngFor="let directory of (directories|directoryFilter: filterValue|directoryFilterStartLetterPipe: filterByStartCharValue)">
    <app-directory-entry [directory]="directory"></app-directory-entry>
  </div>
</ng-template>

<!-- Cover grid -->
<app-cover-grid [directories]="directories" [dirQp]="dirQp"></app-cover-grid>
